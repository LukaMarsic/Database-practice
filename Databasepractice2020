drop database if exists edunovapp22;
create database edunovapp22;
use edunovapp22;

create table smjer(
    sifra int,
    naziv varchar(50),
    trajanje int,
    cijena decimal(18,2),
    verificiran boolean
);


create table grupa(
    sifra int,
    naziv varchar(20),
    smjer int,
    predavac int,
    datumpocetka datetime,
    brojpolaznika int
);

create table predavac(
    sifra int,
    ime varchar(50),
    prezime varchar(50),
    oib char(11),
    email varchar(50),
    iban varchar(50)

);

create table polaznik(
    sifra int,
    ime varchar(50),
    prezime varchar(50),
    oib char(11),
    email varchar(50),
    brojugovora varchar(20)
);




#c:\xampp\mysql\bin\mysql -uedunova -pedunova <d:\skriptapp22.sql
drop database if exists edunovapp22;
create database edunovapp22;
use edunovapp22;

create table smjer(
    sifra int not null primary key auto_increment,
    naziv varchar(50) not null,
    trajanje int not null,
    cijena decimal(18,2),
    verificiran boolean
);


create table grupa(
    sifra int not null primary key auto_increment,
    naziv varchar(20) not null,
    smjer int not null, # FK
    predavac int, #FK
    datumpocetka datetime,
    brojpolaznika int
);

create table osoba(
    sifra int not null primary key auto_increment,
    ime varchar (50) not null,
    prezime varchar(50) not null,
    oib char(11),
    email varchar(50) not null

);


create table predavac(
    sifra int not null primary key auto_increment,
    osoba int not null, #FK
    iban varchar(50)

);

create table polaznik(
    sifra int not null primary key auto_increment,
    osoba int not null, #FK 
    brojugovora varchar(20)
);

create table clan(
    grupa int not null, #FK
    polaznik int not null  #FK
);


alter table grupa add foreign key (smjer) references smjer (sifra);
alter table grupa add foreign key (predavac) references predavac (sifra);

alter table predavac add foreign key (osoba) references osoba (sifra);
alter table polaznik add foreign key (osoba) references osoba (sifra);

alter table clan add foreign key (grupa) references grupa(sifra);
alter table clan add foreign key (polaznik) references polaznik(sifra);
